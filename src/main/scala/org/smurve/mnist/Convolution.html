<!DOCTYPE html>
<html>
<head>
    <title>NNLayer</title>
    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    TeX: { equationNumbers: {autoNumber: "AMS"} },
    displayAlign: "left"
    });
    </script>
    <script type="text/javascript" async
            src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>


<body style="font-family: Helvetica,serif;">
<h1>Convolution</h1>
<h2>Convolutional mapping</h2>
<div style="width: 800px">

    <p>
        Let \( \mathcal{F}^n \) with \( 0 < n < f \) be one of f feature maps, and \(c_n\) the number of columns of its
        matrix representation
    </p>
    <p>
        Let furthermore \( \chi^m \) be the mth input vector (image), \(D_p\) the size of the convolution window, with
        \(D_p=c_p \cdot r_p\) the product of row count times column count, then we calculate the value of the feature matrix
        \(\mathcal{F}\)at index k as
    </p>
    <p>
        \begin{equation}
        \mathcal{F}_k^n(\chi^m) = \sum_{j=0}^{D_p-1} w^n_j \cdot \chi^m_{\xi(k)+\phi(j)}
        \end{equation}
    </p>
    <p>Using integer division, the offset \(\xi(k) \) and the projection index \(\phi(j)\) are defined by</p>
    <p>
        \begin{equation}
            \xi(k) = c_\chi \cdot \frac{k}{c_\mathcal{F}} + k \bmod c_\mathcal{F}
        \end{equation}
    </p>
    <p>and with \(c_i\) being the number of columns of the incoming image</p>
    <p>
        \begin{equation}
        \phi(j) = j \bmod c_p + \frac{j}{c_p} \cdot c_i
        \end{equation}
    </p>
    <p>Defining</p>
    <p>
        \begin{equation}
        \tau(k,j) = \phi(j) + \xi(k)
        \end{equation}
    </p>
    <p>Equation 1) becomes </p>
    <p>
        \begin{equation}
        \mathcal{F}_k^n(\chi^m) = \sum_{j=0}^{D_p-1} w^n_j \cdot \chi^m_{\tau(k,j)}
        \end{equation}
    </p>

    <p>
        which we implement as
    </p>


</div>
</body>
</html>